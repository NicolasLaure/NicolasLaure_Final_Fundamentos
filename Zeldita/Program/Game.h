#pragma once
#include <iostream>
#include <windows.h>
#include <conio.h>
#include "Player.h"
using namespace std;

enum class Scenes
{
	Menu,
	Game,
	Credits,
	End
};

struct TileMap
{
	bool hasCollision;
	bool isCaveEntrance;
	bool isEndOfMap;
};
struct GameData
{
	// Global Variables
	HANDLE handle = GetStdHandle(STD_OUTPUT_HANDLE);

	Scenes scene = Scenes::Menu;
	Scenes prevScene;
	const int ConsoleFontSize = 30;

	bool enteredNewScene = false;
	bool isArtPrinted = false;

	int mapToPrint = 0;
	Player player;

	//Map Size = [25][93] added 4 and 2 to make the offset
	TileMap mapOfTiles[32][95];

	string maps[2][25]
	{
	 {
	R"(#&#&&#&#&&#&#&&#&&#&&#&#&&#&#&&#&#&&#@#               #@##&#&%#&#&%#&#&%#&%&%#&%&%#&%&%#&%&%)",
	R"(#@#*##@#*##@#*##@#*##@#*#@#@#*##@#*##@#               #@##@#*##@#*##@#*##@#*##@#*##@#*##@#*#)",
	R"(#&#&&#&#&&#&#&&#&#&&[    ]#&#&&.#%(@#@#               #@##&#&%#&#&%#&#&%#&%&%#&%&%#&%&%#&%&%)",
	R"(#@#*##@#*##@#*##@#*#[    ]#@#*#.%%                    #@##@#*##@#*##@#*##@#*##@#*##@#*##@#*#)",
	R"(#&#&&#&#&&#&#&&.#%(@                                  #@##&#&%#&#&%#&#&%#&%&%#&%&%#&%&%#&%&%)",
	R"(#@#*##@#*##@#*#.%%                                    #@##@#*##@#*##@#*##@#*##@#*##@#*##@#*#)",
	R"(#&#&&#&#&&.#%/@                                       #@##&#&%#&#&%#&#&%#&%&%#&%&%#&%&%#&%&%)",
	R"(#@#*##@#*#.%%                                         #@##@#*##@#*##@#*##@#*##@#*##@#*##@#*#)",
	R"(#&#&&.#%/@                                            #@##(#@##&#&%#&#&%#&%&%#&%&%#&%&%#&%&%)",
	R"(#@#*#.%%                                               #@#@#&*#@#*##@#*##@#*##@#*##@#*##@#*#)",
	R"(                                                                                            )",
	R"(                                                                                            )",
	R"(                                                                                            )",
	R"(                                                                                            )",
	R"(                                                                                            )",
	R"( %                                                                                 %    %   )",
	R"(##/#####%@                                                                        ##/####/##)",
	R"(#&#&&#&#&&                                                                        #&%&%#&%&%)",
	R"(#@#*##@#*#                                                                        #@#*##@#*#)",
	R"(#&#&&#&#&&                                                                        #&%&%#&%&%)",
	R"(#@#*##@#*#                                                                        #@#*##@#*#)",
	R"(#&#&&#&#&&.%     %     %     %     %     %     %     %     %     %     %     %    #&%&%#&%&%)",
	R"(#@#*##@#*###/####/####/####/####/####/####/####/####/####/####/####/###@#*##@#*#@#/####/####)",
	R"(#&#&&#&#&&#&#&&#&#&&#&#&&#&#&&#&#&&#&#&&#&#&%#&#&%#&#&%#&#&%#&%&%#&%&%#&%&%#&%&%@##&#&&#&#&&)",
	R"(#@#*##@#*##@#*##@#*##@#*##@#*##@#*##@#*##@#*##@#*##@#*##@#*##@#*##@#*##@#*##@#*#@#*##@#*##@#)"
	},
	 {
	R"(%&@%@@%@@%@%%@@%@%%@@&@%%@@@@%%@%@@%@@%@%%@%@%%@@%@%%@@@@%%@&@@%@@%@&%@@%@%%@@%@%%@@@@%%@@@@)",
	R"(%%@%&&%%%%&@%&%%&@%@%&&@%@%&&&%@%&&%%&%&@%%%&@%@%%&@%@%&&@%@%&&%%@%&@%%%%&@%@%%&@%@%&&@%@%&&)",
	R"(%&%@%&%%%@%@@%%@%@@%@@%@@%@@&&@%@&&%%%@%@&%@%@@%&@%@@%@@&@@%@@&%&%@%@%%%@%@@%&@%@@%@@%@@%@@&)",
	R"(@%@%%@@%%%%%%&%%%&%@%%%@%@%%@@%@%%@@%&%%%&%%%%%@%%%@%@%%@@%@%%@@%@%%&@%%%%%%@%%%@%@%%&@%@%%@)",
	R"(@@@%%&@@@&%@%@@@%@%@@@%@@@@@%@@@%&%@@@%%@&@@%@%@@@%@&@@@%@@@&@%@@@%%@@@@@%@%@@@%@&@@@%@@@@@%)",
	R"(%%@%%@%%@%%%                                                                     %@%%@@%@%%@)",
	R"(%&@%%%%@%%%%       IT'S    DANGEROUS    TO   GO   ALONE!!    TAKE    THIS.       %@%@%@%@%@%)",
	R"(%&@%@@%@@%@%                                                                     %@@@@%%@@@@)",
	R"(%%@%&&%%%%&@                                 A                                   %@%&&@%@%&&)",
	R"(%&%@%&%%%@%@            /\                  MMM                      /\          @%@@%@@%@@&)",
	R"(@%@%%@@%%%%%           /\\\                 / \                     /\\\         %@%%&@%@%%@)",
	R"(@@@%%&@@@&%@            \/                                           \/          &@@@%@@@@@%)",
	R"(%%@%%@%%@%%%                                                                     %@%%@@%@%%@)",
	R"(%&@%%%%@%%%%                               ->---                                 %@%@%@%@%@%)",
	R"(%&@%@@%@@%@%                                                                     %@@@@%%@@@@)",
	R"(%%@%&&%%%%&@                                                                     %@%&&@%@%&&)",
	R"(%&%@%&%%%@%@                                                                     @%@@%@@%@@&)",
	R"(@%@%%@@%%%%%                                                                     %@%%&@%@%%@)",
	R"(@@@%%&@@@&%@                                                                     &@@@%@@@@@%)",
	R"(%%@%%@%%@%%%                                                                     %@%%@@%@%%@)",
	R"(%&@%%%%@%%%%                                                                     %@%@%@%@%@%)",
	R"(%&@%@@%@@%@%                                                                     %@@@@%%@@@@)",
	R"(%%@%&&%%%%&@%%@%%@%%@%%@%%@%%@%%@%%@%&@%&            %@%%@%%@%%@%%@%&@%@&%&%%@%%@%@%&&@%@%&&)",
	R"(%&%@%&%%%@%@%%@@&&%%@@&@%%@@%&%&@@%&%&@@&            %@@%@%&@@%&%&@@&&%@@@&%%@@&@@%@@%@@%@@&)",
	R"(@%@%%@@%%%%%%&%%%&%@%%%@%@%%@@%@%%@@%&%%%            %%%@@%@%%@@%@%%&@%%%%%%@%%%@%@%%&@%@%%@)"
	}
	};
	// Game
	bool isMenuFirstPhase = true;
	bool firstScreen = true;

	Vector2 storedPosition;
};



void Play();
void GameLoop(GameData& gd);


void Menu(GameData& gd);
void MenuStart();
void MenuUpdate(GameData& gd);
void MenuDraw(GameData& gd);

void Game(GameData& gd);
void GameStart(GameData& gd);
void GameUpdate(GameData& gd);
void GameDraw(GameData& gd);


//utilities
void SetConsoleFontSize(int size);
void PrintMap(GameData& gd, string map[], int MAP_HEIGHT);
void PrintUpperBar(GameData gd);
void PrintPlayer(GameData& gd);
